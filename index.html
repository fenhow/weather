<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Weather Widget</title>
</head>
<body>
  <a class="weatherwidget-io" id="weather-link"
     href=""
     data-label_1=""
     data-label_2="WEATHER"
     data-icons="Climacons Animated"
     data-theme="pure">
     Loading Weather...
  </a>

  <script>
    // Extract ?city= from URL
    const params = new URLSearchParams(window.location.search);
    const city = params.get("city") || "Houston";

    // Build Forecast7-compatible path
    const citySlug = city.toLowerCase().replace(/\s+/g, '-');

    // Apply dynamic attributes
    const link = document.getElementById("weather-link");
    link.href = `https://forecast7.com/en/29d76n95d37/${citySlug}/`;
    link.setAttribute("data-label_1", city.toUpperCase());

    // Disable link behavior
    setTimeout(() => {
      link.addEventListener("click", e => e.preventDefault());
    }, 2000);

    // Load widget
    !function(d,s,id){
      var js,fjs=d.getElementsByTagName(s)[0];
      if(!d.getElementById(id)){
        js=d.createElement(s);js.id=id;
        js.src='https://weatherwidget.io/js/widget.min.js';
        fjs.parentNode.insertBefore(js,fjs);
      }
    }(document,'script','weatherwidget-io-js');
  </script>
</body>
</html>
